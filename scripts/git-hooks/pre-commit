#!/bin/bash

# Pre-commit hook for Kotlin project
# This hook formats code and runs checks before allowing commit

set -e

echo "Running pre-commit checks..."

# Change to project root directory
cd "$(git rev-parse --show-toplevel)"

# First, format the code
echo "Formatting code..."
make format

# Add any formatted files back to staging
git add -u

# Then run all checks
echo "Running checks..."
make check

echo "Pre-commit checks passed!"